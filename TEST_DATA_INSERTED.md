# âœ… æµ‹è¯•æ•°æ®å·²æˆåŠŸæ’å…¥

**æ—¶é—´**: 2025-11-02
**çŠ¶æ€**: å®Œæˆ

## ğŸ“Š æ•°æ®ç»Ÿè®¡

- **æ€»ç”¨æˆ·æ•°**: 4
- **Super Admin**: 2
- **Store Owner**: 2
- **æ€»åº—å®¶æ•°**: 4

## ğŸ‘¥ æµ‹è¯•è´¦å·

### 1ï¸âƒ£ Super Admin (ç°æœ‰è´¦å·)
```
Email: luke2work@gmail.com
å¯†ç : aa123123
è§’è‰²: super_admin
åº—å®¶: 0
```

### 2ï¸âƒ£ Super Admin (æ–°å»ºè´¦å·) â­ **æ¨èä½¿ç”¨**
```
Email: admin@592meal.com
å¯†ç : admin123
è§’è‰²: super_admin
åº—å®¶: 1 (æ¸¬è©¦é¤å»³ - ç®¡ç†å“¡)
```

### 3ï¸âƒ£ Store Owner A
```
Email: owner1@592meal.com
å¯†ç : owner123
è§’è‰²: store_owner
åº—å®¶: 2 (ç¾å‘³å°åƒåº— A, å’–å•¡å»³ A)
```

### 4ï¸âƒ£ Store Owner B
```
Email: owner2@592meal.com
å¯†ç : owner123
è§’è‰²: store_owner
åº—å®¶: 1 (ç¾å‘³å°åƒåº— B)
```

## ğŸª åº—å®¶æ•°æ®

### åº—å®¶ 1: æ¸¬è©¦é¤å»³ - ç®¡ç†å“¡
- **ID**: 2
- **Subdomain**: test-admin
- **Slug**: test-restaurant-admin
- **åº—ä¸»**: admin@592meal.com
- **ç±»å‹**: é¤å»³ (restaurant)
- **åœ°å€**: å°åŒ—å¸‚ä¿¡ç¾©å€ä¿¡ç¾©è·¯äº”æ®µ7è™Ÿ
- **ç”µè¯**: 02-1234-5678
- **æœåŠ¡æ¨¡å¼**: æ··åˆæ¨¡å¼ (hybrid)
- **è¥ä¸šæ—¶é—´**: å‘¨ä¸€è‡³å‘¨äº” 10:00-21:00, å‘¨å…­æ—¥ 11:00-22:00
- **åº—å‘˜å¯†ç **: staff123
- **å‰å°ç½‘å€**: https://app.592meal.online/store/test-restaurant-admin

### åº—å®¶ 2: ç¾å‘³å°åƒåº— A
- **ID**: 3
- **Subdomain**: snack-a
- **Slug**: delicious-snack-a
- **åº—ä¸»**: owner1@592meal.com
- **ç±»å‹**: å°åƒåº— (snack)
- **åœ°å€**: å°åŒ—å¸‚å¤§å®‰å€å¿ å­æ±è·¯å››æ®µ223è™Ÿ
- **ç”µè¯**: 02-2345-6789
- **æœåŠ¡æ¨¡å¼**: åº—å€å–é¤ (pickup)
- **è¥ä¸šæ—¶é—´**: å‘¨ä¸€è‡³å‘¨äº” 09:00-20:00, å‘¨æ—¥ 10:00-18:00, å‘¨å…­å…¬ä¼‘
- **åº—å‘˜å¯†ç **: staff123
- **å‰å°ç½‘å€**: https://app.592meal.online/store/delicious-snack-a

### åº—å®¶ 3: å’–å•¡å»³ A
- **ID**: 4
- **Subdomain**: coffee-a
- **Slug**: coffee-shop-a
- **åº—ä¸»**: owner1@592meal.com
- **ç±»å‹**: å’–å•¡å»³ (cafe)
- **åœ°å€**: å°åŒ—å¸‚ä¸­å±±å€å—äº¬æ±è·¯äºŒæ®µ100è™Ÿ
- **ç”µè¯**: 02-3456-7890
- **æœåŠ¡æ¨¡å¼**: åº—å€å–é¤ (pickup)
- **è¥ä¸šæ—¶é—´**: å‘¨ä¸€è‡³å‘¨å›› 08:00-22:00, å‘¨äº” 08:00-23:00, å‘¨å…­æ—¥ 09:00-22:00/23:00
- **åº—å‘˜å¯†ç **: staff123
- **å‰å°ç½‘å€**: https://app.592meal.online/store/coffee-shop-a

### åº—å®¶ 4: ç¾å‘³å°åƒåº— B
- **ID**: 5
- **Subdomain**: snack-b
- **Slug**: delicious-snack-b
- **åº—ä¸»**: owner2@592meal.com
- **ç±»å‹**: é¤å»³ (restaurant)
- **åœ°å€**: å°åŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯äº”æ®µ188è™Ÿ
- **ç”µè¯**: 02-4567-8901
- **æœåŠ¡æ¨¡å¼**: é§é»æœå‹™ (onsite)
- **è¥ä¸šæ—¶é—´**: å‘¨ä¸€è‡³å‘¨å…­ 11:00-20:00, å‘¨æ—¥å…¬ä¼‘
- **åº—å‘˜å¯†ç **: staff123
- **å‰å°ç½‘å€**: https://app.592meal.online/store/delicious-snack-b

## ğŸ” ç™»å½•æµ‹è¯•

### åå°ç™»å½• (CMS)
```
URL: https://cms.592meal.online
æ¨èè´¦å·: admin@592meal.com
å¯†ç : admin123
```

### é¢„æœŸè¡Œä¸º

#### âœ… æƒé™æ£€æŸ¥å·²ç¦ç”¨çš„æƒ…å†µä¸‹
ç”±äºæƒé™æ£€æŸ¥å·²ä¸´æ—¶ç¦ç”¨ï¼ˆè¯¦è§ `PERMISSION_BYPASS_ENABLED.md`ï¼‰ï¼Œæ‰€æœ‰å·²ç™»å½•ç”¨æˆ·åº”è¯¥å¯ä»¥ï¼š
- æˆåŠŸç™»å½•åå°
- è®¿é—® Dashboard
- æŸ¥çœ‹æ‰€æœ‰ Resourcesï¼ˆåº—å®¶ã€ç”¨æˆ·ã€è§’è‰²ç­‰ï¼‰
- åˆ›å»º/ç¼–è¾‘/åˆ é™¤ä»»ä½•æ•°æ®

#### æµ‹è¯•åœºæ™¯

**åœºæ™¯ A: ä½¿ç”¨ admin@592meal.com ç™»å½•**
- åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°æ‰€æœ‰ 4 ä¸ªåº—å®¶
- åº”è¯¥èƒ½å¤Ÿè®¿é—®æ‰€æœ‰ç®¡ç†åŠŸèƒ½
- åº”è¯¥èƒ½å¤ŸæŸ¥çœ‹/ç¼–è¾‘æ‰€æœ‰ç”¨æˆ·

**åœºæ™¯ B: ä½¿ç”¨ owner1@592meal.com ç™»å½•**
- åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°æ‰€æœ‰ 4 ä¸ªåº—å®¶ï¼ˆå› ä¸ºæƒé™æ£€æŸ¥å·²ç¦ç”¨ï¼‰
- æ­£å¸¸æƒ…å†µä¸‹åªåº”è¯¥çœ‹åˆ°è‡ªå·±çš„ 2 ä¸ªåº—å®¶
- è¿™ç”¨äºæµ‹è¯•æƒé™ç³»ç»Ÿæ˜¯å¦å·¥ä½œ

**åœºæ™¯ C: ä½¿ç”¨ owner2@592meal.com ç™»å½•**
- åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°æ‰€æœ‰ 4 ä¸ªåº—å®¶ï¼ˆå› ä¸ºæƒé™æ£€æŸ¥å·²ç¦ç”¨ï¼‰
- æ­£å¸¸æƒ…å†µä¸‹åªåº”è¯¥çœ‹åˆ°è‡ªå·±çš„ 1 ä¸ªåº—å®¶

## âš ï¸ é‡è¦æé†’

### 1. æƒé™æ£€æŸ¥å·²ä¸´æ—¶ç¦ç”¨
å½“å‰æ‰€æœ‰æƒé™æ£€æŸ¥éƒ½å·²ä¸´æ—¶ç¦ç”¨ï¼Œç”¨äºæ’æŸ¥ 403 é”™è¯¯ã€‚è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ï¼š
- `PERMISSION_BYPASS_ENABLED.md`

å·²ä¿®æ”¹çš„æ–‡ä»¶ï¼š
- `app/Models/User.php`
- `app/Filament/Traits/HasResourcePermissions.php`
- `app/Providers/AppServiceProvider.php`
- `app/Filament/Resources/Stores/StoreResource.php`

### 2. å¦‚ä½•æ¢å¤æƒé™æ£€æŸ¥
æµ‹è¯•å®Œæˆåï¼Œä½¿ç”¨ Git è¿˜åŸï¼š
```bash
cd /opt/592meal/www
git checkout app/Models/User.php app/Filament/Traits/HasResourcePermissions.php app/Providers/AppServiceProvider.php app/Filament/Resources/Stores/StoreResource.php
docker exec 592meal_php php artisan cache:clear
docker exec 592meal_php php artisan config:clear
cd /opt/592meal && docker compose restart php
```

### 3. æµ‹è¯•å»ºè®®

#### æ­¥éª¤ 1: æ¸…é™¤æµè§ˆå™¨æ•°æ®
```
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. Application â†’ Storage â†’ Clear site data
3. æ¸…é™¤æ‰€æœ‰ä¸ .592meal.online ç›¸å…³çš„æ•°æ®
```

#### æ­¥éª¤ 2: ç™»å½•æµ‹è¯•
```
1. è®¿é—® https://cms.592meal.online
2. ä½¿ç”¨ admin@592meal.com / admin123
3. è§‚å¯Ÿæ˜¯å¦å‡ºç° 403
```

#### æ­¥éª¤ 3: å¦‚æœä»ç„¶ 403
æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼š
- Network tab â†’ æ‰¾åˆ° 403 å“åº”
- Console tab â†’ æŸ¥çœ‹ JavaScript é”™è¯¯
- Application tab â†’ æ£€æŸ¥ Cookie

æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼š
```bash
docker exec 592meal_php tail -f /var/www/html/www/storage/logs/laravel-$(date +%Y-%m-%d).log
```

## ğŸ“ æ•°æ®éªŒè¯ç»“æœ

### æ•°æ®åº“æŸ¥è¯¢ç¡®è®¤
```
ç”¨æˆ·æ€»æ•°: 4
åº—å®¶æ€»æ•°: 4

ç”¨æˆ·åˆ—è¡¨:
  ID: 1 | Email: luke2work@gmail.com | Roles: super_admin
  ID: 2 | Email: admin@592meal.com | Roles: super_admin
  ID: 3 | Email: owner1@592meal.com | Roles: store_owner
  ID: 4 | Email: owner2@592meal.com | Roles: store_owner

åº—å®¶åˆ—è¡¨:
  ID: 2 | Name: æ¸¬è©¦é¤å»³ - ç®¡ç†å“¡ | Owner: admin@592meal.com | Slug: test-restaurant-admin
  ID: 3 | Name: ç¾å‘³å°åƒåº— A | Owner: owner1@592meal.com | Slug: delicious-snack-a
  ID: 4 | Name: å’–å•¡å»³ A | Owner: owner1@592meal.com | Slug: coffee-shop-a
  ID: 5 | Name: ç¾å‘³å°åƒåº— B | Owner: owner2@592meal.com | Slug: delicious-snack-b
```

### è§’è‰²æƒé™ç¡®è®¤
```
âœ… æ‰€æœ‰ç”¨æˆ·éƒ½å·²åˆ†é…è§’è‰²
âœ… Super Admin è§’è‰²æ‹¥æœ‰æ‰€æœ‰æƒé™
âœ… Store Owner è§’è‰²æ‹¥æœ‰åŸºæœ¬æƒé™
âœ… æ‰€æœ‰ç”¨æˆ·çš„ email éƒ½å·²éªŒè¯
```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **ç«‹å³æµ‹è¯•ç™»å½•**: ä½¿ç”¨ `admin@592meal.com` / `admin123` ç™»å½•åå°
2. **è§‚å¯Ÿç»“æœ**:
   - å¦‚æœæˆåŠŸ â†’ 403 é—®é¢˜ç¡®å®æ˜¯æƒé™ç³»ç»Ÿå¼•èµ·çš„
   - å¦‚æœä»ç„¶ 403 â†’ é—®é¢˜åœ¨æµè§ˆå™¨ Cookie/Session æˆ–å…¶ä»–ä¸­é—´ä»¶
3. **æŠ¥å‘Šæµ‹è¯•ç»“æœ**: æ ¹æ®æµ‹è¯•ç»“æœå†³å®šä¸‹ä¸€æ­¥è°ƒè¯•æ–¹å‘

---

**æ’å…¥è„šæœ¬**: `/opt/592meal/www/insert_test_data.php`
**æ•°æ®çŠ¶æ€**: âœ… å·²æˆåŠŸæ’å…¥å¹¶éªŒè¯
